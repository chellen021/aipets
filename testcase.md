# 萌宠伙伴微信小程序测试用例

## 文档说明

本文档旨在为「萌宠伙伴」微信小程序提供全面的测试用例，确保产品质量，覆盖功能、UI、性能、安全等多个方面。测试用例基于以下文档制定：
- 《萌宠伙伴微信小程序需求规格说明书 V1.1》
- 《萌宠伙伴微信小程序设计规范 V1.0》
- 《萌宠伙伴微信小程序系统架构设计文档 V1.0》

## 测试范围

- 用户系统 (注册、登录、个人信息管理)
- 宠物生成系统 (照片上传、AI生成、命名)
- 宠物互动系统 (基础互动、状态系统、动作反馈)
- 签到打卡系统
- 排行榜系统
- 积分商城系统
- UI/UX (视觉、交互、响应式)
- API接口测试
- 性能测试
- 安全测试
- 兼容性测试

## 测试用例模板

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|

## 1. 用户系统测试用例

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_USER_001 | 用户系统 | 注册与登录 | 首次用户微信授权登录 | 用户未登录 | 1. 打开小程序 <br> 2. 点击微信授权登录按钮 <br> 3. 在微信授权弹窗中点击“允许” | 1. 成功登录小程序 <br> 2. 后端成功获取并存储用户openid、昵称、头像 <br> 3. 前端获取到有效的会话Token <br> 4. 跳转到小程序首页或宠物生成引导页 |  | 高 | 功能测试 |  |
| TC_USER_002 | 用户系统 | 注册与登录 | 用户拒绝微信授权 | 用户未登录 | 1. 打开小程序 <br> 2. 点击微信授权登录按钮 <br> 3. 在微信授权弹窗中点击“拒绝” | 1. 登录失败 <br> 2. 小程序停留在登录页或给出相应提示 <br> 3. 用户无法使用核心功能 |  | 高 | 功能测试 |  |
| TC_USER_003 | 用户系统 | 注册与登录 | 已授权用户自动登录 | 用户已授权过且Token有效 | 1. 打开小程序 | 1. 自动登录成功 <br> 2. 直接进入小程序首页或上次退出时的页面 |  | 高 | 功能测试 |  |
| TC_USER_004 | 用户系统 | 注册与登录 | Token失效后重新登录 | 用户Token已过期 | 1. 打开小程序或进行需要授权的操作 | 1. 提示Token失效 <br> 2. 引导用户重新授权登录 |  | 高 | 功能测试 |  |
| TC_USER_005 | 用户系统 | 注册与登录 | 隐私政策确认 | 用户首次登录 | 1. 完成微信授权 | 1. 弹出隐私政策和服务条款确认框 <br> 2. 用户必须勾选同意后才能继续 |  | 高 | 功能测试 |  |
| TC_USER_006 | 用户系统 | 个人信息管理 | 查看个人信息 | 用户已登录 | 1. 进入“我的”页面 | 1. 正确显示用户头像、昵称、ID等信息 |  | 中 | 功能测试 |  |
| TC_USER_007 | 用户系统 | 个人信息管理 | 修改昵称-合法字符 | 用户已登录 | 1. 进入编辑个人信息页 <br> 2. 修改昵称为“小萌新” <br> 3. 点击保存 | 1. 提示修改成功 <br> 2. 个人信息页昵称更新为“小萌新” |  | 中 | 功能测试 |  |
| TC_USER_008 | 用户系统 | 个人信息管理 | 修改昵称-包含敏感词 | 用户已登录 | 1. 进入编辑个人信息页 <br> 2. 修改昵称为包含预设敏感词的名称 <br> 3. 点击保存 | 1. 提示昵称包含敏感词，修改失败 <br> 2. 昵称未被修改 |  | 中 | 功能测试 |  |
| TC_USER_009 | 用户系统 | 个人信息管理 | 修改头像-从相册选择 | 用户已登录 | 1. 进入编辑个人信息页 <br> 2. 点击头像，选择“从相册选择” <br> 3. 选择一张图片并确认 | 1. 头像预览更新 <br> 2. 点击保存后，个人信息页头像更新 |  | 中 | 功能测试 |  |
| TC_USER_010 | 用户系统 | 个人信息管理 | 退出登录 | 用户已登录 | 1. 进入“设置”页面 <br> 2. 点击“退出登录”按钮 <br> 3. 确认退出 | 1. 清除本地会话Token <br> 2. 跳转到登录页面 |  | 高 | 功能测试 |  |
| TC_USER_011 | 用户系统 | UI/UX | 授权登录页UI | N/A | 1. 打开未登录的小程序 | 1. 页面布局、颜色、字体、按钮样式符合设计规范 (`design_spec.md` 3.2.1) <br> 2. Logo、Slogan显示正确 |  | 中 | UI测试 |  |
| TC_USER_012 | 用户系统 | UI/UX | 个人信息页UI | 用户已登录 | 1. 进入“我的”页面 | 1. 页面布局、头像、昵称、列表项样式符合设计规范 (`design_spec.md` 3.2.2) |  | 中 | UI测试 |  |

## 2. 宠物生成系统测试用例

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_PETGEN_001 | 宠物生成 | 照片上传 | 从相册选择照片上传 | 用户已登录，进入宠物生成流程 | 1. 点击“从相册选择”按钮 <br> 2. 选择一张符合要求的图片 (JPG/PNG, <5MB) <br> 3. 确认上传 | 1. 图片成功上传 <br> 2. 显示图片预览 <br> 3. 可进行裁剪、旋转操作 |  | 高 | 功能测试 |  |
| TC_PETGEN_002 | 宠物生成 | 照片上传 | 拍照上传 | 用户已登录，进入宠物生成流程 | 1. 点击“立即拍照”按钮 <br> 2. 拍摄一张清晰正面照 <br> 3. 确认使用照片 | 1. 照片成功上传 <br> 2. 显示图片预览 <br> 3. 可进行裁剪、旋转操作 |  | 高 | 功能测试 |  |
| TC_PETGEN_003 | 宠物生成 | 照片上传 | 上传不合规图片-大小超限 | 用户已登录 | 1. 选择一张大于5MB的图片上传 | 1. 提示图片过大，上传失败 |  | 中 | 功能测试 |  |
| TC_PETGEN_004 | 宠物生成 | 照片上传 | 上传不合规图片-格式错误 | 用户已登录 | 1. 选择一张非JPG/PNG格式的图片上传 | 1. 提示图片格式不支持，上传失败 |  | 中 | 功能测试 |  |
| TC_PETGEN_005 | 宠物生成 | 宠物生成 | AI成功生成宠物 | 照片已成功上传 | 1. 点击“开始生成”或类似按钮 | 1. 在预期时间内（如10-15秒）显示生成的宠物形象 <br> 2. 宠物形象与上传照片特征有一定关联性 |  | 高 | 功能测试 |  |
| TC_PETGEN_006 | 宠物生成 | 宠物生成 | 宠物3D模型预览与旋转 | 宠物已生成 | 1. 在宠物预览界面 <br> 2. 尝试拖动宠物模型 | 1. 宠物模型可360度平滑旋转查看 |  | 高 | 功能测试 | UI测试 |
| TC_PETGEN_007 | 宠物生成 | 宠物生成 | 宠物命名-合法名称 | 宠物已生成 | 1. 在命名输入框输入“旺财” <br> 2. 点击“确认领养” | 1. 宠物命名成功 <br> 2. 宠物数据正确保存 <br> 3. 跳转到宠物互动主页 |  | 高 | 功能测试 |  |
| TC_PETGEN_008 | 宠物生成 | 宠物生成 | 宠物命名-包含敏感词 | 宠物已生成 | 1. 在命名输入框输入含敏感词的名称 <br> 2. 点击“确认领养” | 1. 提示名称包含敏感词，命名失败 |  | 中 | 功能测试 |  |
| TC_PETGEN_009 | 宠物生成 | 宠物生成 | 重新生成宠物 | 宠物已生成，且有重新生成次数 | 1. 点击“重新生成”按钮 | 1. 系统使用同一张照片再次调用AI生成服务 <br> 2. 展示新的宠物形象 |  | 中 | 功能测试 |  |
| TC_PETGEN_010 | 宠物生成 | UI/UX | 照片上传页UI | N/A | 1. 进入照片上传页面 | 1. 页面布局、引导文案、按钮样式符合设计规范 (`design_spec.md` 3.3.1) |  | 中 | UI测试 |  |
| TC_PETGEN_011 | 宠物生成 | UI/UX | 宠物生成预览页UI | 照片已上传 | 1. 进入宠物生成预览页 | 1. 宠物展示区、命名框、按钮样式符合设计规范 (`design_spec.md` 3.3.2) |  | 中 | UI测试 |  |

## 3. 宠物互动系统测试用例

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_INTERACT_001 | 宠物互动 | 基础互动-喂食 | 成功喂食宠物 | 用户已拥有宠物，宠物饥饱度非满 | 1. 进入宠物互动主页 <br> 2. 点击“喂食”按钮 <br> 3. 选择一种食物 | 1. 宠物做出进食动画和满足表情 <br> 2. 播放咀嚼音效 <br> 3. 宠物饥饱度增加，可能增加亲密度 |  | 高 | 功能测试 |  |
| TC_INTERACT_002 | 宠物互动 | 基础互动-抚摸 | 成功抚摸宠物 | 用户已拥有宠物 | 1. 进入宠物互动主页 <br> 2. 在宠物模型可交互区域滑动或点击 | 1. 宠物做出享受的动画（如眯眼、摇尾巴） <br> 2. 发出愉悦的声音 <br> 3. 宠物心情值和亲密度增加 |  | 高 | 功能测试 |  |
| TC_INTERACT_003 | 宠物互动 | 基础互动-玩耍 | 与宠物玩耍 | 用户已拥有宠物 | 1. 进入宠物互动主页 <br> 2. 点击“玩耍”按钮 <br> 3. 选择一个玩具 | 1. 宠物与玩具进行互动动画 <br> 2. 宠物心情值增加，可能消耗体力值 |  | 高 | 功能测试 |  |
| TC_INTERACT_004 | 宠物互动 | 基础互动-清洁 | 为宠物清洁 | 用户已拥有宠物，宠物清洁度非满 | 1. 进入宠物互动主页 <br> 2. 点击“清洁”按钮 <br> 3. 选择清洁工具 | 1. 宠物被清洁的动画 <br> 2. 宠物清洁度增加，心情值少量增加 |  | 高 | 功能测试 |  |
| TC_INTERACT_005 | 宠物互动 | 状态系统 | 状态值UI显示 | 用户已拥有宠物 | 1. 进入宠物互动主页 | 1. 正确显示宠物的心情值、饥饱度、清洁度、等级、经验值等 <br> 2. 状态条或数值与实际值一致 |  | 高 | UI测试 | 功能测试 |
| TC_INTERACT_006 | 宠物互动 | 状态系统 | 状态自然衰减 | 用户已拥有宠物，距离上次登录有一定时间间隔 | 1. 登录小程序，进入宠物互动主页 | 1. 宠物的饥饱度、清洁度随时间自然下降 <br> 2. 心情值可能受其他状态影响而波动 |  | 中 | 功能测试 | 后端逻辑 |
| TC_INTERACT_007 | 宠物互动 | 状态系统 | 宠物升级 | 用户已拥有宠物，经验值达到升级门槛 | 1. 进行可获得经验的互动（如训练、完成任务） | 1. 宠物等级提升 <br> 2. 播放升级特效和音效 <br> 3. 可能解锁新功能或外观 |  | 高 | 功能测试 |  |
| TC_INTERACT_008 | 宠物互动 | 动作与行为反馈 | 宠物情绪表现-开心 | 宠物心情值高 | 1. 观察宠物待机状态或互动后 | 1. 宠物展现开心的表情和动作 |  | 中 | 功能测试 | UI/UX测试 |
| TC_INTERACT_009 | 宠物互动 | 动作与行为反馈 | 宠物情绪表现-饥饿 | 宠物饥饱度低 | 1. 观察宠物待机状态 | 1. 宠物表现出饥饿的信号（如特定动作、音效） |  | 中 | 功能测试 | UI/UX测试 |
| TC_INTERACT_010 | 宠物互动 | UI/UX | 宠物互动主页UI | 用户已拥有宠物 | 1. 进入宠物互动主页 | 1. 页面布局、宠物形象、状态指示器、互动按钮符合设计规范 (`design_spec.md` 3.4) |  | 高 | UI测试 |  |

## 4. 签到打卡系统测试用例

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_CHECKIN_001 | 签到打卡 | 每日签到 | 用户当日首次签到 | 用户已登录，当日未签到 | 1. 进入签到页面 <br> 2. 点击“立即签到”按钮 | 1. 提示签到成功 <br> 2. 获得固定奖励（积分/道具） <br> 3. 签到按钮状态变为“今日已签到” <br> 4. 日历上标记当日已签到 |  | 高 | 功能测试 |  |
| TC_CHECKIN_002 | 签到打卡 | 每日签到 | 用户重复签到 | 用户已登录，当日已签到 | 1. 进入签到页面 <br> 2. 尝试再次点击签到相关操作 | 1. 无法进行签到操作，或提示“今日已签到” |  | 中 | 功能测试 |  |
| TC_CHECKIN_003 | 签到打卡 | 连续签到奖励 | 达到连续签到3天 | 用户已连续签到2天，今日签到 | 1. 完成当日签到 | 1. 额外获得连续签到3天的奖励 |  | 中 | 功能测试 |  |
| TC_CHECKIN_004 | 签到打卡 | 补签功能 | 成功补签 | 用户有未签到的日期，有足够积分/道具 | 1. 进入签到页面 <br> 2. 选择一个可补签的日期 <br> 3. 点击补签并确认消耗 | 1. 提示补签成功 <br> 2. 对应日期标记为已补签 <br> 3. 扣除相应积分/道具 |  | 中 | 功能测试 |  |
| TC_CHECKIN_005 | 签到打卡 | 日历展示 | 查看当月签到情况 | 用户已登录 | 1. 进入签到页面 | 1. 日历正确显示当月天数 <br> 2. 已签到、未签到、可补签日期有不同标记 |  | 低 | UI测试 | 功能测试 |
| TC_CHECKIN_006 | 签到打卡 | UI/UX | 签到页UI | N/A | 1. 进入签到页面 | 1. 日历、签到按钮、奖励展示等符合设计规范 (`design_spec.md` 3.5) |  | 中 | UI测试 |  |

## 5. 排行榜系统测试用例

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_RANK_001 | 排行榜 | 榜单类型 | 查看总榜/等级榜 | 用户已登录 | 1. 进入排行榜页面 <br> 2. 切换到“总榜”或“等级榜” | 1. 正确显示用户排名列表（名次、头像、昵称、等级/积分） <br> 2. 数据按降序排列 |  | 低 | 功能测试 |  |
| TC_RANK_002 | 排行榜 | 榜单类型 | 查看好友榜 | 用户已登录并授权获取微信好友关系 | 1. 进入排行榜页面 <br> 2. 切换到“好友榜” | 1. 仅显示微信好友的排名信息 |  | 低 | 功能测试 |  |
| TC_RANK_003 | 排行榜 | 数据展示 | 我的排名显示 | 用户已登录，在榜单上有排名 | 1. 查看任一榜单 | 1. 在列表底部或特定区域显示“我的当前排名”信息 |  | 低 | UI测试 | 功能测试 |
| TC_RANK_004 | 排行榜 | UI/UX | 排行榜页面UI | N/A | 1. 进入排行榜页面 | 1. 标签页切换、列表项样式、用户信息展示符合设计规范 (`design_spec.md` 3.6) |  | 中 | UI测试 |  |

## 6. 积分商城系统测试用例

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_MALL_001 | 积分商城 | 商品浏览 | 查看商品列表 | 用户已登录 | 1. 进入积分商城页面 | 1. 正确显示商品列表（图片、名称、所需积分、兑换按钮） <br> 2. 显示用户当前积分余额 |  | 中 | 功能测试 |  |
| TC_MALL_002 | 积分商城 | 商品兑换 | 成功兑换虚拟商品-积分充足 | 用户积分足够兑换某虚拟商品 | 1. 在商城选择一个虚拟商品 <br> 2. 点击“兑换”按钮 <br> 3. 在确认弹窗中确认 | 1. 提示兑换成功 <br> 2. 用户积分扣除 <br> 3. 虚拟商品发放到用户账户/背包 |  | 高 | 功能测试 |  |
| TC_MALL_003 | 积分商城 | 商品兑换 | 兑换商品-积分不足 | 用户积分不足以兑换某商品 | 1. 在商城选择一个商品 <br> 2. 点击“兑换”按钮 | 1. 提示积分不足，兑换失败 <br> 2. 用户积分未扣除 |  | 中 | 功能测试 |  |
| TC_MALL_004 | 积分商城 | 商品详情 | 查看商品详情 | 用户已登录 | 1. 在商城列表点击任一商品 | 1. 跳转到商品详情页 <br> 2. 显示商品大图、名称、描述、所需积分等详细信息 |  | 低 | 功能测试 |  |
| TC_MALL_005 | 积分商城 | UI/UX | 积分商城首页UI | N/A | 1. 进入积分商城页面 | 1. 用户积分显示、商品卡片样式、按钮符合设计规范 (`design_spec.md` 3.7) |  | 中 | UI测试 |  |
| TC_MALL_006 | 积分商城 | UI/UX | 商品详情页UI | N/A | 1. 进入任一商品详情页 | 1. 商品图片轮播、信息展示、兑换按钮符合设计规范 (`design_spec.md` 3.8) |  | 中 | UI测试 |  |

## 7. API接口测试用例 (示例)

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_API_USER_001 | API | 用户认证服务 | `/auth/wechat_login` - 正常请求 | N/A | 1. 使用有效的微信 `code` 调用接口 | 1. 返回 `code: 0` <br> 2. `data` 中包含有效的 `token` 和用户信息 |  | 高 | API测试 |  |
| TC_API_USER_002 | API | 用户认证服务 | `/auth/wechat_login` - 无效 `code` | N/A | 1. 使用无效或过期的微信 `code` 调用接口 | 1. 返回非0 `code` (如微信错误码) <br> 2. `message` 中包含错误描述 |  | 高 | API测试 |  |
| TC_API_PET_001 | API | 宠物服务 | `/pet/generate` - 正常生成 | 有效的 `photo_id` | 1. 使用有效的 `photo_id` 调用接口 | 1. 返回 `code: 0` <br> 2. `data` 中包含生成的宠物信息 (模型数据、初始属性等) |  | 高 | API测试 |  |
| TC_API_INTERACT_001 | API | 互动服务 | `/pet/{pet_id}/interact` - 喂食成功 | `pet_id` 有效，`interaction_type: feeding`, `item_id` 有效 | 1. 调用接口进行喂食操作 | 1. 返回 `code: 0` <br> 2. `data` 中包含更新后的宠物状态 |  | 高 | API测试 |  |

## 8. 性能测试用例 (示例)

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_PERF_001 | 小程序 | 启动性能 | 小程序冷启动时间 | N/A | 1. 清除小程序缓存后首次打开 | 1. 首页加载完成时间 < 3秒 (示例值) |  | 高 | 性能测试 |  |
| TC_PERF_002 | 宠物生成 | AI生成 | 宠物生成响应时间 | 照片上传成功 | 1. 点击“开始生成”到宠物形象展示 | 1. 平均响应时间 < 15秒 (示例值) |  | 高 | 性能测试 |  |
| TC_PERF_003 | 宠物互动 | 3D模型 | 宠物互动页面帧率 | 进入宠物互动主页 | 1. 进行多种宠物互动操作 | 1. 页面平均帧率 > 30 FPS (示例值) |  | 中 | 性能测试 |  |

## 9. 安全测试用例 (示例)

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_SEC_001 | 用户系统 | API授权 | 未授权访问受保护API | 无有效Token | 1. 尝试直接调用需要登录才能访问的API (如 `/user/profile`) | 1. API返回401或特定错误码，提示未授权 |  | 高 | 安全测试 |  |
| TC_SEC_002 | 用户系统 | 输入校验 | 昵称XSS注入 | N/A | 1. 在修改昵称处输入 `<script>alert('xss')</script>` | 1. 输入被正确过滤或转义 <br> 2. 页面不执行脚本 |  | 高 | 安全测试 |  |
| TC_SEC_003 | 宠物生成 | 文件上传 | 上传恶意脚本文件 | N/A | 1. 尝试上传一个伪装成图片的恶意脚本文件 | 1. 后端校验文件类型失败，拒绝上传 <br> 2. 或文件上传后无法被执行 |  | 高 | 安全测试 |  |

## 10. 兼容性测试用例 (示例)

| 测试用例ID | 模块 | 子模块/功能点 | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 | 优先级 | 测试类型 | 备注 |
|---|---|---|---|---|---|---|---|---|---|---|
| TC_COMPAT_001 | UI | 整体布局 | iPhone X系列刘海屏适配 | 使用iPhone X或类似机型 | 1. 浏览小程序各主要页面 | 1. 页面内容不被刘海或底部安全区域遮挡 <br> 2. 交互元素可正常点击 |  | 高 | 兼容性测试 |  |
| TC_COMPAT_002 | UI | 整体布局 | Android低端机型显示 | 使用性能较低的Android机型 | 1. 浏览小程序各主要页面，进行核心操作 | 1. 页面布局无错乱 <br> 2. 动画不过于卡顿，功能可正常使用 |  | 中 | 兼容性测试 |  |
| TC_COMPAT_003 | 功能 | 微信版本 | 不同微信版本核心功能 | 使用不同版本的微信客户端 (最新版、较旧稳定版) | 1. 测试用户登录、宠物生成、核心互动等功能 | 1. 核心功能在各版本微信上均可正常工作 |  | 高 | 兼容性测试 |  |

---
**文档结束**